
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Matplotlib: Beyond the basics &#8212; Stat 159/259 - Reproducible and Collaborative Data Science 1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Matplotlib: Live plots" href="10-matplotlib_live_plots.html" />
    <link rel="prev" title="The trapezoidal rule: vectorization and perormance" href="../09-intro-numpy/trapezoid.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Matplotlib:-Beyond-the-basics">
<h1>Matplotlib: Beyond the basics<a class="headerlink" href="#Matplotlib:-Beyond-the-basics" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Status-and-plan-for-today">
<h2>Status and plan for today<a class="headerlink" href="#Status-and-plan-for-today" title="Permalink to this headline">¶</a></h2>
<p>By now you know the basics of:</p>
<ul class="simple">
<li>Numpy array creation and manipulation.</li>
<li>Display of data in numpy arrays, sufficient for interactive
exploratory work.</li>
</ul>
<p>Hopefully after this notebook you will:</p>
<ul class="simple">
<li>Know how to polish those figures to the point where they can go to a
journal.</li>
<li>Understand matplotlib’s internal model enough to:<ul>
<li>know where to look for knobs to fine-tune</li>
<li>better understand the help and examples online</li>
<li>use it as a development platform for complex visualization</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="Resources">
<h2>Resources<a class="headerlink" href="#Resources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <a class="reference external" href="https://matplotlib.org/contents.html">official matplotlib
documentation</a> is detailed
and comprehensive. Particularly useful sections are:<ul>
<li>The <a class="reference external" href="https://matplotlib.org/gallery/index.html">gallery</a>.</li>
<li>The <cite>high level overview of its dual APIs, ``pyplot`</cite> and
object-oriented &lt;<a class="reference external" href="https://matplotlib.org/api/pyplot_summary.html">https://matplotlib.org/api/pyplot_summary.html</a>&gt;`__.</li>
<li>The <a class="reference external" href="https://matplotlib.org/tutorials/index.html">topical
tutorials</a>.</li>
</ul>
</li>
<li>A detailed
<a class="reference external" href="https://www.labri.fr/perso/nrougier/teaching/matplotlib">tutorial</a>
by Nicolas Rougier, similar in style to the ones we saw for Numpy.</li>
<li>The fantastic <a class="reference external" href="https://python-graph-gallery.com">Python Graph
Gallery</a>, which provides a large
collection of plots with emphasis on statistical visualizations. It
uses <a class="reference external" href="https://seaborn.pydata.org">Seaborn</a> extensively.</li>
<li>In this tutorial we’ll focus on “raw” matplotlib, but for a wide
variety of statistical visualization tasks, using Seaborn makes life
much easier. We’ll dive into its
<a class="reference external" href="https://seaborn.pydata.org/tutorial.html">tutorial</a> later on.</li>
</ul>
</div>
<div class="section" id="Matplotlib’s-main-APIs:-pyplot-and-object-oriented">
<h2>Matplotlib’s main APIs: <code class="docutils literal"><span class="pre">pyplot</span></code> and object-oriented<a class="headerlink" href="#Matplotlib’s-main-APIs:-pyplot-and-object-oriented" title="Permalink to this headline">¶</a></h2>
<p>Matplotlib is a library that can be thought of as having two main ways
of being used:</p>
<ul class="simple">
<li>via <code class="docutils literal"><span class="pre">pyplot</span></code> calls, as a high-level, matlab-like library that
automatically manages details like figure creation.</li>
<li>via its internal object-oriented structure, that offers full control
over all aspects of the figure, at the cost of slightly more verbose
calls for the common case.</li>
</ul>
<p>The pyplot api:</p>
<ul class="simple">
<li>Easiest to use.</li>
<li>Sufficient for simple and moderately complex plots.</li>
<li>Does not offer complete control over all details.</li>
</ul>
<p>Before we look at our first simple example, we must activate matplotlib
support in the notebook:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>%matplotlib inline

import matplotlib.pyplot as plt
import numpy as np
# a few widely used tools from numpy
from numpy import sin, cos, exp, sqrt, pi, linspace, arange
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>x = linspace(0, 2 * pi)
y = sin(x)
plt.plot(x, y, label=&#39;sin(x)&#39;)
plt.legend()
plt.title(&#39;Harmonic&#39;)
plt.xlabel(&#39;x&#39;)
plt.ylabel(&#39;y&#39;)

# Add one line to that plot
z = cos(x)
plt.plot(x, z, label=&#39;cos(x)&#39;)

# Make a second figure with a simple plot
plt.figure()
plt.plot(x, sin(2*x), label=&#39;sin(2x)&#39;)
plt.legend();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_3_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_3_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_3_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_3_1.png" />
</div>
</div>
<p>Here is how to create the same two plots, using explicit management of
the figure and axis objects:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>f, ax = plt.subplots()  # we manually make a figure and axis
ax.plot(x,y, label=&#39;sin(x)&#39;)  # it&#39;s the axis who plots
ax.legend()
ax.set_title(&#39;Harmonic&#39;)  # we set the title on the axis
ax.set_xlabel(&#39;x&#39;)  # same with labels
ax.set_ylabel(&#39;y&#39;)

# Make a second figure with a simple plot.  We can name the figure with a
# different variable name as well as its axes, and then control each
f1, ax1 = plt.subplots()
ax1.plot(x, sin(2*x), label=&#39;sin(2x)&#39;)
ax1.legend()

# Since we now have variables for each axis, we can add back to the first
# figure even after making the second
ax.plot(x, z, label=&#39;cos(x)&#39;);
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_5_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_5_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_5_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_5_1.png" />
</div>
</div>
<p>It’s important to understand the existence of these objects, even if you
use mostly the top-level pyplot calls most of the time. Many things can
be accomplished in MPL with mostly pyplot and a little bit of tweaking
of the underlying objects. We’ll revisit the object-oriented API later.</p>
<p>Important commands to know about, and which matplotlib uses internally a
lot:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gcf</span><span class="p">()</span>  <span class="c1"># get current figure</span>
<span class="n">gca</span><span class="p">()</span>  <span class="c1"># get current axis</span>
</pre></div>
</div>
</div>
<div class="section" id="Making-subplots">
<h2>Making subplots<a class="headerlink" href="#Making-subplots" title="Permalink to this headline">¶</a></h2>
<p>The simplest command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
</pre></div>
</div>
<p>which is equivalent to:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</pre></div>
</div>
<p>By passing arguments to <code class="docutils literal"><span class="pre">subplots</span></code>, you can easily create a regular
plot grid:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>x = linspace(0, 2*pi, 400)
y = sin(x**2)

# Just a figure and one subplot
f, ax = plt.subplots()
ax.plot(x, y)
ax.set_title(&#39;Simple plot&#39;)

# Two subplots, unpack the output array immediately
f, (ax1, ax2) = plt.subplots(1, 2)
ax1.plot(x, y)
ax2.scatter(x, y)

# Put a figure-level title
f.suptitle(&#39;Two plots&#39;);
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_8_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_8_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_8_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_8_1.png" />
</div>
</div>
<p>And finally, an arbitrarily complex grid can be made with
<code class="docutils literal"><span class="pre">subplot2grid</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>f = plt.figure()
ax1 = plt.subplot2grid((3,3), (0,0), colspan=3)
ax2 = plt.subplot2grid((3,3), (1,0), colspan=2)
ax3 = plt.subplot2grid((3,3), (1, 2), rowspan=2)
ax4 = plt.subplot2grid((3,3), (2, 0))
ax5 = plt.subplot2grid((3,3), (2, 1))

# Let&#39;s turn off visibility of all tick labels here
for ax in f.axes:
   for t in ax.get_xticklabels()+ax.get_yticklabels():
       t.set_visible(False)

# And add a figure-level title at the top
f.suptitle(&#39;Subplot2grid&#39;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_10_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_10_0.png" />
</div>
</div>
</div>
<div class="section" id="Manipulating-properties-across-matplotlib">
<h2>Manipulating properties across matplotlib<a class="headerlink" href="#Manipulating-properties-across-matplotlib" title="Permalink to this headline">¶</a></h2>
<p>In matplotlib, most properties for lines, colors, etc, can be set
directly in the call:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>plt.plot([1,2,3], linestyle=&#39;--&#39;, color=&#39;r&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[&lt;matplotlib.lines.Line2D at 0x1156e53c8&gt;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_12_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_12_1.png" />
</div>
</div>
<p>But for finer control you can get a hold of the returned line object
(more on these objects later):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div>In [1]: line, = plot([1,2,3])</div></blockquote>
<p>These line objects have a lot of properties you can control, a full list
is seen here by tab-completing in IPython:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div>In [2]: line.set
line.set                     line.set_drawstyle           line.set_mec
line.set_aa                  line.set_figure              line.set_mew
line.set_agg_filter          line.set_fillstyle           line.set_mfc
line.set_alpha               line.set_gid                 line.set_mfcalt
line.set_animated            line.set_label               line.set_ms
line.set_antialiased         line.set_linestyle           line.set_picker
line.set_axes                line.set_linewidth           line.set_pickradius
line.set_c                   line.set_lod                 line.set_rasterized
line.set_clip_box            line.set_ls                  line.set_snap
line.set_clip_on             line.set_lw                  line.set_solid_capstyle
line.set_clip_path           line.set_marker              line.set_solid_joinstyle
line.set_color               line.set_markeredgecolor     line.set_transform
line.set_contains            line.set_markeredgewidth     line.set_url
line.set_dash_capstyle       line.set_markerfacecolor     line.set_visible
line.set_dashes              line.set_markerfacecoloralt  line.set_xdata
line.set_dash_joinstyle      line.set_markersize          line.set_ydata
line.set_data                line.set_markevery           line.set_zorder</div></blockquote>
<p>But the <code class="docutils literal"><span class="pre">setp</span></code> call (short for set property) can be very useful,
especially while working interactively because it contains introspection
support, so you can learn about the valid calls as you work:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div><p>In [7]: line, = plot([1,2,3])</p>
<dl class="docutils">
<dt>In [8]: setp(line, ‘linestyle’)</dt>
<dd>linestyle: [ <code class="docutils literal"><span class="pre">'-'</span></code> | <code class="docutils literal"><span class="pre">'--'</span></code> | <code class="docutils literal"><span class="pre">'-.'</span></code> | <code class="docutils literal"><span class="pre">':'</span></code> | <code class="docutils literal"><span class="pre">'None'</span></code> | <code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code> | <code class="docutils literal"><span class="pre">''</span></code> ]         and any drawstyle in combination with a linestyle, e.g. <code class="docutils literal"><span class="pre">'steps--'</span></code>.</dd>
<dt>In [9]: setp(line)</dt>
<dd>agg_filter: unknown
alpha: float (0.0 transparent through 1.0 opaque)
animated: [True | False]
antialiased or aa: [True | False]
…
… much more output elided
…</dd>
</dl>
</div></blockquote>
<p>In the first form, it shows you the valid values for the ‘linestyle’
property, and in the second it shows you all the acceptable properties
you can set on the line object. This makes it very easy to discover how
to customize your figures to get the visual results you need.</p>
<p>Furthermore, setp can manipulate multiple objects at a time:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>x = linspace(0, 2*pi)
y1 = sin(x)
y2 = sin(2*x)
lines = plt.plot(x, y1, x, y2)

# We will set the width and color of all lines in the figure at once:
plt.setp(lines, linewidth=2, color=&#39;r&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[None, None, None, None]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_14_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_14_1.png" />
</div>
</div>
<p>Finally, if you know what properties you want to set on a specific
object, a plain <code class="docutils literal"><span class="pre">set</span></code> call is typically the simplest form:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>line, = plt.plot([1,2,3])
line.set(lw=2, c=&#39;red&#39;,ls=&#39;--&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[None, None, None]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_16_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_16_1.png" />
</div>
</div>
</div>
<div class="section" id="Understanding-what-matplotlib-returns:-lines,-axes-and-figures">
<h2>Understanding what matplotlib returns: lines, axes and figures<a class="headerlink" href="#Understanding-what-matplotlib-returns:-lines,-axes-and-figures" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Lines">
<h3>Lines<a class="headerlink" href="#Lines" title="Permalink to this headline">¶</a></h3>
<p>In a simple plot:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>plt.plot([1,2,3])
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[&lt;matplotlib.lines.Line2D at 0x115310c18&gt;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_18_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_18_1.png" />
</div>
</div>
<p>The return value of the plot call is a list of lines, which can be
manipulated further. If you capture the line object (in this case it’s a
single line so we use a one-element tuple):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>line, = plt.plot([1,2,3])
line.set_color(&#39;r&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_20_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_20_0.png" />
</div>
</div>
<p>One line property that is particularly useful to be aware of is
<code class="docutils literal"><span class="pre">set_data</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span># Create a plot and hold the line object
line, = plt.plot([1,2,3], label=&#39;my data&#39;)
plt.grid()
plt.title(&#39;My title&#39;)

# ... later, we may want to modify the x/y data but keeping the rest of the
# figure intact, with our new data:
x = linspace(0, 1)
y = x**2

# This can be done by operating on the data object itself
line.set_data(x, y)

# Now we must set the axis limits manually. Note that we can also use xlim
# and ylim to set the x/y limits separately.
plt.axis([0,1,0,1])

# Note, alternatively this can be done with:
ax = plt.gca()  # get currently active axis object
ax.relim()
ax.autoscale_view()

# as well as requesting matplotlib to draw
plt.draw()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_22_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_22_0.png" />
</div>
</div>
</div>
<div class="section" id="The-next-important-component,-axes">
<h3>The next important component, axes<a class="headerlink" href="#The-next-important-component,-axes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">axis</span></code> call above was used to set the x/y limits of the axis. And
in previous examples we called <code class="docutils literal"><span class="pre">.plot</span></code> directly on axis objects. Axes
are the main object that contains a lot of the user-facing functionality
of matplotlib:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div><p>In [15]: f = plt.figure()</p>
<p>In [16]: ax = f.add_subplot(111)</p>
<p>In [17]: ax.
Display all 299 possibilities? (y or n)
ax.acorr                                 ax.hitlist
ax.add_artist                            ax.hlines
ax.add_callback                          ax.hold
ax.add_collection                        ax.ignore_existing_data_limits
ax.add_line                              ax.images
ax.add_patch                             ax.imshow</p>
<p>… etc.</p>
</div></blockquote>
<p>Many of the commands in <code class="docutils literal"><span class="pre">plt.&lt;command&gt;</span></code> are nothing but wrappers
around axis calls, with machinery to automatically create a figure and
add an axis to it if there wasn’t one to begin with. The output of most
axis actions that draw something is a collection of lines (or other more
complex geometric objects).</p>
</div>
<div class="section" id="Enclosing-it-all,-the-figure">
<h3>Enclosing it all, the figure<a class="headerlink" href="#Enclosing-it-all,-the-figure" title="Permalink to this headline">¶</a></h3>
<p>The enclosing object is the <code class="docutils literal"><span class="pre">figure</span></code>, that holds all axes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div><p>In [17]: f = plt.figure()</p>
<p>In [18]: f.add_subplot(211)
Out[18]: &lt;matplotlib.axes.AxesSubplot object at 0x9d0060c&gt;</p>
<p>In [19]: f.axes
Out[19]: [&lt;matplotlib.axes.AxesSubplot object at 0x9d0060c&gt;]</p>
<p>In [20]: f.add_subplot(212)
Out[20]: &lt;matplotlib.axes.AxesSubplot object at 0x9eacf0c&gt;</p>
<p>In [21]: f.axes
Out[21]:
[&lt;matplotlib.axes.AxesSubplot object at 0x9d0060c&gt;,</p>
<blockquote>
<div>&lt;matplotlib.axes.AxesSubplot object at 0x9eacf0c&gt;]</div></blockquote>
</div></blockquote>
<p>The basic view of matplotlib is: a figure contains one or more axes,
axes draw and return collections of one or more geometric objects
(lines, patches, etc).</p>
<p>For all the gory details on this topic, see the matplotlib <a class="reference external" href="http://matplotlib.sourceforge.net/users/artists.html">artist
tutorial</a>.</p>
</div>
</div>
<div class="section" id="Anatomy-of-a-common-plot">
<h2>Anatomy of a common plot<a class="headerlink" href="#Anatomy-of-a-common-plot" title="Permalink to this headline">¶</a></h2>
<p>Let’s make a simple plot that contains a few commonly used decorations</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>f, ax = plt.subplots()

# Three simple polyniomials
x = linspace(-1, 1)
y1,y2,y3 = [x**i for i in [1,2,3]]

# Plot each with a label (for a legend)
ax.plot(x, y1, label=&#39;linear&#39;)
ax.plot(x, y2, label=&#39;cuadratic&#39;)
ax.plot(x, y3, label=&#39;cubic&#39;)
# Make all lines drawn so far thicker
plt.setp(ax.lines, linewidth=2)

# Add a grid and a legend that doesn&#39;t overlap the lines
ax.grid(True)
ax.legend(loc=&#39;lower right&#39;)

# Add black horizontal and vertical lines through the origin
ax.axhline(0, color=&#39;black&#39;)
ax.axvline(0, color=&#39;black&#39;)

# Set main text elements of the plot
ax.set_title(&#39;Some polynomials&#39;)
ax.set_xlabel(&#39;x&#39;)
ax.set_ylabel(&#39;p(x)&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[12]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Text(0,0.5,&#39;p(x)&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_26_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_26_1.png" />
</div>
</div>
</div>
<div class="section" id="Common-plot-types">
<h2>Common plot types<a class="headerlink" href="#Common-plot-types" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Error-plots">
<h3>Error plots<a class="headerlink" href="#Error-plots" title="Permalink to this headline">¶</a></h3>
<p>First a very simple error plot</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span># example data
x = arange(0.1, 4, 0.5)
y = exp(-x)

# example variable error bar values
yerr = 0.1 + 0.2*sqrt(x)
xerr = 0.1 + yerr

# First illustrate basic pyplot interface, using defaults where possible.
plt.figure()
plt.errorbar(x, y, xerr=0.2, yerr=0.4)
plt.title(&quot;Simplest errorbars, 0.2 in x, 0.4 in y&quot;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[13]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Text(0.5,1,&#39;Simplest errorbars, 0.2 in x, 0.4 in y&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_28_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_28_1.png" />
</div>
</div>
<p>Now a more elaborate one, using the OO interface to exercise more
features.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span># same data/errors as before
x = arange(0.1, 4, 0.5)
y = exp(-x)
yerr = 0.1 + 0.2*sqrt(x)
xerr = 0.1 + yerr

fig, axs = plt.subplots(nrows=2, ncols=2)
ax = axs[0,0]
ax.errorbar(x, y, yerr=yerr, fmt=&#39;o&#39;)
ax.set_title(&#39;Vert. symmetric&#39;)

# With 4 subplots, reduce the number of axis ticks to avoid crowding.
ax.locator_params(nbins=4)

ax = axs[0,1]
ax.errorbar(x, y, xerr=xerr, fmt=&#39;o&#39;)
ax.set_title(&#39;Hor. symmetric&#39;)

ax = axs[1,0]
ax.errorbar(x, y, yerr=[yerr, 2*yerr], xerr=[xerr, 2*xerr], fmt=&#39;--o&#39;, label=&#39;foo&#39;)
ax.legend()
ax.set_title(&#39;H, V asymmetric&#39;)

ax = axs[1,1]
ax.set_yscale(&#39;log&#39;)
# Here we have to be careful to keep all y values positive:
ylower = np.maximum(1e-2, y - yerr)
yerr_lower = y - ylower

ax.errorbar(x, y, yerr=[yerr_lower, 2*yerr], xerr=xerr,
                             fmt=&#39;o&#39;, ecolor=&#39;g&#39;)
ax.set_title(&#39;Mixed sym., log y&#39;)

# Fix layout to minimize overlap between titles and marks
# https://matplotlib.org/users/tight_layout_guide.html
plt.tight_layout()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_30_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_30_0.png" />
</div>
</div>
</div>
<div class="section" id="Logarithmic-plots">
<h3>Logarithmic plots<a class="headerlink" href="#Logarithmic-plots" title="Permalink to this headline">¶</a></h3>
<p>A simple log plot</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>x = linspace(-5, 5)
y = exp(-x**2)

f, (ax1, ax2) = plt.subplots(2, 1)
ax1.plot(x, y)
ax2.semilogy(x, y)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[15]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[&lt;matplotlib.lines.Line2D at 0x115235e48&gt;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_32_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_32_1.png" />
</div>
</div>
<p>A more elaborate log plot using ‘symlog’, that treats a specified range
as linear (thus handling values near zero) and symmetrizes negative
values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>x = linspace(-50, 50, 100)
y = linspace(0, 100, 100)

# Create the figure and axes
f, (ax1, ax2, ax3) = plt.subplots(3, 1)

# Symlog on the x axis
ax1.plot(x, y)
ax1.set_xscale(&#39;symlog&#39;)
ax1.set_ylabel(&#39;symlogx&#39;)
# Grid for both axes
ax1.grid(True)
# Minor grid on too for x
ax1.xaxis.grid(True, which=&#39;minor&#39;)

# Symlog on the y axis
ax2.plot(y, x)
ax2.set_yscale(&#39;symlog&#39;)
ax2.set_ylabel(&#39;symlogy&#39;)

# Symlog on both
ax3.plot(x, sin(x / 3.0))
ax3.set_xscale(&#39;symlog&#39;)
ax3.set_yscale(&#39;symlog&#39;)
ax3.grid(True)
ax3.set_ylabel(&#39;symlog both&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[16]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Text(0,0.5,&#39;symlog both&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_34_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_34_1.png" />
</div>
</div>
</div>
<div class="section" id="Bar-plots">
<h3>Bar plots<a class="headerlink" href="#Bar-plots" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span># a bar plot with errorbars
import numpy as np
import matplotlib.pyplot as plt

N = 5
menMeans = (20, 35, 30, 31, 27)
menStd =   (2, 3, 4, 1, 2)

ind = arange(N)  # the x locations for the groups
width = 0.35       # the width of the bars

fig = plt.figure()
ax = fig.add_subplot(111)
rects1 = ax.bar(ind, menMeans, width, color=&#39;r&#39;, yerr=menStd)

womenMeans = (25, 32, 34, 21, 29)
womenStd =   (3, 5, 2, 3, 3)
rects2 = ax.bar(ind+width, womenMeans, width, color=&#39;y&#39;, yerr=womenStd)

# add some
ax.set_ylabel(&#39;Scores&#39;)
ax.set_title(&#39;Scores by group and gender&#39;)
ax.set_xticks(ind+width)
ax.set_xticklabels( (&#39;G1&#39;, &#39;G2&#39;, &#39;G3&#39;, &#39;G4&#39;, &#39;G5&#39;) )

ax.legend( (rects1[0], rects2[0]), (&#39;Men&#39;, &#39;Women&#39;) )
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[17]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.legend.Legend at 0x115e43ef0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_36_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_36_1.png" />
</div>
</div>
</div>
<div class="section" id="Scatter-plots">
<h3>Scatter plots<a class="headerlink" href="#Scatter-plots" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">scatter</span></code> command produces scatter plots with arbitrary markers.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>from matplotlib import cm

t = linspace(0.0, 6*pi, 100)
y = exp(-0.1*t)*cos(t)
phase = t % 2*pi
f = plt.figure()
ax = f.add_subplot(111)
ax.scatter(t, y, s=100*abs(y), c=phase, cmap=cm.jet)
ax.set_ylim(-1,1)
ax.grid()
ax.axhline(0, color=&#39;k&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[18]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.lines.Line2D at 0x115ebacc0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_38_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_38_1.png" />
</div>
</div>
</div>
<div class="section" id="Exercise">
<h3>Exercise<a class="headerlink" href="#Exercise" title="Permalink to this headline">¶</a></h3>
<p>Consider you have the following data in a text file (The file
<code class="docutils literal"><span class="pre">data/stations.txt</span></code> contains the full dataset):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Station  Lat    Long   Elev</span>
<span class="n">BIRA</span>    <span class="mf">26.4840</span> <span class="mf">87.2670</span> <span class="mf">0.0120</span>
<span class="n">BUNG</span>    <span class="mf">27.8771</span> <span class="mf">85.8909</span> <span class="mf">1.1910</span>
<span class="n">GAIG</span>    <span class="mf">26.8380</span> <span class="mf">86.6318</span> <span class="mf">0.1660</span>
<span class="n">HILE</span>    <span class="mf">27.0482</span> <span class="mf">87.3242</span> <span class="mf">2.0880</span>
<span class="o">...</span> <span class="n">etc</span><span class="o">.</span>
</pre></div>
</div>
<p>These are the names of seismographic stations in the Himalaya, with
their coordinates and elevations in Kilometers.</p>
<ol class="arabic simple">
<li>Make a scatter plot of all of these, using both the size and the
color to (redundantly) encode elevation. Label each station by its
4-letter code, and add a colorbar on the right that shows the
color-elevation map.</li>
<li>If you have the basemap toolkit installed, repeat the same exercise
but draw a grid with parallels and meridians, add rivers in cyan and
country boundaries in yellow. Also, draw the background using the
NASA BlueMarble image of Earth. You can install it with
<code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">basemap</span></code>.</li>
</ol>
<p><strong>Tips</strong></p>
<ul>
<li><p class="first">You can check whether you have Basemap installed with:</p>
<p>from mpl_toolkits.basemap import Basemap</p>
</li>
<li><p class="first">For the basemap part, choose a text label color that provides
adequate reading contrast over the image background.</p>
</li>
<li><p class="first">Create your Basemap with ‘i’ resolution, otherwise it will take
forever to draw.</p>
</li>
</ul>
</div>
<div class="section" id="Histograms">
<h3>Histograms<a class="headerlink" href="#Histograms" title="Permalink to this headline">¶</a></h3>
<p>Matplotlib has a built-in command for histograms.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>mu, sigma = 100, 15
x = mu + sigma * np.random.randn(10000)

# the histogram of the data
n, bins, patches = plt.hist(x, 50, normed=1, facecolor=&#39;g&#39;, alpha=0.75)

plt.xlabel(&#39;Smarts&#39;)
plt.ylabel(&#39;Probability&#39;)
plt.title(&#39;Histogram of IQ&#39;)
plt.text(60, .025, r&#39;$\mu=100,\ \sigma=15$&#39;)
plt.axis([40, 160, 0, 0.03])
plt.grid(True)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_41_0.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_41_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Aribitrary-text-and-LaTeX-support">
<h2>Aribitrary text and LaTeX support<a class="headerlink" href="#Aribitrary-text-and-LaTeX-support" title="Permalink to this headline">¶</a></h2>
<p>In matplotlib, text can be added either relative to an individual axis
object or to the whole figure.</p>
<p>These commands add text to the Axes:</p>
<ul class="simple">
<li>title() - add a title</li>
<li>xlabel() - add an axis label to the x-axis</li>
<li>ylabel() - add an axis label to the y-axis</li>
<li>text() - add text at an arbitrary location</li>
<li>annotate() - add an annotation, with optional arrow</li>
</ul>
<p>And these act on the whole figure:</p>
<ul class="simple">
<li>figtext() - add text at an arbitrary location</li>
<li>suptitle() - add a title</li>
</ul>
<p>And any text field can contain LaTeX expressions for mathematics, as
long as they are enclosed in <code class="docutils literal"><span class="pre">$</span></code> signs.</p>
<p>This example illustrates all of them:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>fig = plt.figure()
fig.suptitle(&#39;bold figure suptitle&#39;, fontsize=14, fontweight=&#39;bold&#39;)

ax = fig.add_subplot(111)
fig.subplots_adjust(top=0.85)
ax.set_title(&#39;axes title&#39;)

ax.set_xlabel(&#39;xlabel&#39;)
ax.set_ylabel(&#39;ylabel&#39;)

ax.text(3, 8, &#39;boxed italics text in data coords&#39;, style=&#39;italic&#39;,
        bbox={&#39;facecolor&#39;:&#39;red&#39;, &#39;alpha&#39;:0.5, &#39;pad&#39;:10})

ax.text(2, 6, r&#39;an equation: $E=mc^2$&#39;, fontsize=15)

ax.text(3, 2, &#39;unicode: Institut für Festkörperphysik&#39;)

ax.text(0.95, 0.01, &#39;colored text in axes coords&#39;,
        verticalalignment=&#39;bottom&#39;, horizontalalignment=&#39;right&#39;,
        transform=ax.transAxes,
        color=&#39;green&#39;, fontsize=15)


ax.plot([2], [1], &#39;o&#39;)
ax.annotate(&#39;annotate&#39;, xy=(2, 1), xytext=(3, 4),
            arrowprops=dict(facecolor=&#39;black&#39;, shrink=0.05))

ax.axis([0, 10, 0, 10])
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[20]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[0, 10, 0, 10]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_43_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_43_1.png" />
</div>
</div>
</div>
<div class="section" id="Image-display">
<h2>Image display<a class="headerlink" href="#Image-display" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">imshow</span></code> command can display single or multi-channel images. A
simple array of random numbers, plotted in grayscale:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>from matplotlib import cm
plt.imshow(np.random.rand(128, 128), cmap=cm.gray, interpolation=&#39;nearest&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[21]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x115bbe1d0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_45_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_45_1.png" />
</div>
</div>
<p>A real photograph is a multichannel image, <code class="docutils literal"><span class="pre">imshow</span></code> interprets it
correctly:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>img = plt.imread(&#39;data/stained_glass_barcelona.png&#39;)
plt.imshow(img)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[22]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x11631d6d8&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_47_1.png" src="../../_images/lectures_10-matplotlib_beyond_basics_10-matplotlib_beyond_basics_47_1.png" />
</div>
</div>
<div class="section" id="Exercise">
<h3>Exercise<a class="headerlink" href="#Exercise" title="Permalink to this headline">¶</a></h3>
<p>Write a notebook where you can load an image and then perform the
following operations on it:</p>
<ol class="arabic simple">
<li>Create a figure with four plots that show both the full-color image
and color channel of the image with the right colormap for that
color. Ensure that the axes are linked so zooming in one image zooms
the same region in the others.</li>
<li>Compute a luminosity and per-channel histogram and display all four
histograms in one figure, giving each a separate plot (hint: a 4x1
plot works best for this). Link the appropriate axes together.</li>
<li>Create a black-and-white (or more precisely, grayscale) version of
the image. Compare the results from a naive average of all three
channels with that of a model that uses 30% red, 59% green and 11%
blue, by displaying all three (full color and both grayscales) side
by side with linked axes for zooming.</li>
</ol>
<p>Hint: look for the matplotlib image tutorial.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Stat 159/259 - Reproducible and Collaborative Data Science</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01-git/Git-Tutorial.html">An interactive Git Tutorial: the tool you didn’t know you needed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-ipython/Index.html">A quick overview of the Jupyter Notebook and IPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-reading1-discussion.html">Reading discussion - Developing open source scientific practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-reading2-discussion.html">Reading discussion - Scientific Python, IPython, Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-class-practice.html">Class practice: strings, lists &amp; numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-conda-pip-environments.html">Conda and pip - managing environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-reading3-discussion.html">From September 25 reading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-reading3-discussion.html#Make:-automating-tasks">Make: automating tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-ligo-make.html">LIGO, the 2017 Nobel prize in physics, and wrapping up Makefiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-intro-numpy/intro-numpy.html">An Introduction to the Scientific Python Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-intro-numpy/intro-numpy.html#Motivation:-the-trapezoidal-rule">Motivation: the trapezoidal rule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-intro-numpy/intro-numpy.html#NumPy-arrays:-the-right-data-structure-for-scientific-computing">NumPy arrays: the right data structure for scientific computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-intro-numpy/intro-numpy.html#High-quality-data-visualization-with-Matplotlib">High quality data visualization with Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-intro-numpy/trapezoid.html">The trapezoidal rule: vectorization and perormance</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Matplotlib: Beyond the basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="10-matplotlib_live_plots.html">Matplotlib: Live plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_tutorial.html">Matplotlib image tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_tutorial.html#Multichannel-images">Multichannel images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11-strings/11-strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11-strings/11-nltk.html">NLTK: Natural Language Made Easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12-data-intro.html">Data - an introduction to the world of Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13-data-frames.html">Data Manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14-sphinx.html">An introduction to Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15-pvalues/index.html">P-values discussion with Prof. Philip B. Stark</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab1.html">Lab 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab10.html">Lab 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab2.html">Lab 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab3.html">Lab 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab4.html">Lab 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab5.html">Lab 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab6.html">Lab 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab7.html">Lab 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab8.html">Lab 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labs/lab9.html">Lab 9</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Course resources</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../09-intro-numpy/trapezoid.html" title="previous chapter">The trapezoidal rule: vectorization and perormance</a></li>
      <li>Next: <a href="10-matplotlib_live_plots.html" title="next chapter">Matplotlib: Live plots</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Fernando Perez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/lectures/10-matplotlib_beyond_basics/10-matplotlib_beyond_basics.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>